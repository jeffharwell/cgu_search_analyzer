#!/bin/python2.7

import os
import re
import sys

"""
A little utility program which looks at all of the files generated by
'get_google_results.py' and can find which ones are missing.

You will need to edit the 'offset' and expansion type on line 34 and the 
correct range on line 35, and directory on line 33 for the program to work
"""

def get_num_list(base_dir, expansion_type, offset):
    def is_valid_file(var):
        if re.match(r'^%s_[0-9]+' % expansion_type, var):
            return True
        else:
            return False

    c = os.listdir(base_dir)
    fn_list = filter(is_valid_file, c)
    if len(fn_list) == 0:
        return 0

    str_num_list = [x.split('_')[1] for x in c]
    num_list = [int(x) - offset for x in str_num_list] 
    return num_list

def main():
    directory = "searchae_results"
    existing = get_num_list(directory, 's', 4000)
    correct =  range(1,935)
    print set(correct) - set(existing)
    print set(existing) - set(correct)
    

if __name__ == "__main__":
    main()

